{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feed | LinkedIn</title>
    <link rel="icon" type="image/png" href="{% static 'images/linkedin-icon.png' %}">
    <link rel="stylesheet" href="{% static 'css/home_page/styles.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
    <header>
        <div class="header-inner site-wrapper">
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-supported-dps="24x24" fill="#0a66c2"
                    class="mercado-match" width="45" height="45" focusable="false">
                    <path
                        d="M20.5 2h-17A1.5 1.5 0 002 3.5v17A1.5 1.5 0 003.5 22h17a1.5 1.5 0 001.5-1.5v-17A1.5 1.5 0 0020.5 2zM8 19H5v-9h3zM6.5 8.25A1.75 1.75 0 118.3 6.5a1.78 1.78 0 01-1.8 1.75zM19 19h-3v-4.74c0-1.42-.6-1.93-1.38-1.93A1.74 1.74 0 0013 14.19a.66.66 0 000 .14V19h-3v-9h2.9v1.3a3.11 3.11 0 012.7-1.4c1.55 0 3.36.86 3.36 3.66z">
                    </path>
                </svg>
                <input class="input" type="text" placeholder="&#128269; Search" />
            </div>
            <div class="icons-btn-div">
                <div class="icons">
                    <div class="icon">
                        <i class="fa-solid fa-house"></i>
                        <p class="nav-text">Home</p>
                    </div>
                    <div class="icon">
                        <i class="fa-solid fa-users"></i>
                        <p>My Network</p>
                    </div>
                    <div class="icon">
                        <i class="fa-solid fa-briefcase"></i>
                        <p>Job</p>
                    </div>
                    <div class="icon">
                        <i class="fa-solid fa-comment-dots"></i>
                        <p>Messaging</p>
                    </div>
                    <div class="icon">
                        <i class="fa-solid fa-bell"></i>
                        <p>Notification</p>
                    </div>
                    <div class="icon">
                        <i class="fa-solid fa-user"></i>
                        <p>Me</p>
                    </div>
                </div>
                <div class="partition"></div>
                <div class="btns">
                    <a class="btn-link" href="{% url 'default' %}">Logout</a>
                </div>
            </div>
            <div class="icons-btn">

            </div>
    </header>
    <main class="container site-wrapper">
        <!-- Left Sidebar -->
        <aside>
            <div class="profile-card sidebar-left">
                <!-- Profile Image -->
                <div class="profile-avatar">
                    {% if request.user.profile_picture %}
                    <img src="{{ request.user.profile_picture.url }}" alt="Profile Pic">
                    {% else %}
                    <div class="default-avatar">
                        {{ request.user.username|first|upper }}
                    </div>
                    {% endif %}
                </div>

                <!-- Username -->
                <h3>{{ request.user.username }}</h3>

                <!-- Education (if exists) -->
                {% if request.user.education %}
                <p><strong>Education:</strong> {{ request.user.education }}</p>
                {% endif %}

                <!-- Location (if exists) -->
                {% if request.user.location %}
                <p><strong>Location:</strong> {{ request.user.location }}</p>
                {% endif %}

                <!-- Latest Experience Company (if any) -->
                {% if experiences %}
                {% with experiences.0 as latest_exp %}
                <p><strong>Company:</strong> {{ latest_exp.company }}</p>
                {% endwith %}
                {% endif %}

                <!-- Add Experience Button (only if no experience) -->
                {% if not experiences %}
                <button id="addExperienceBtn" class="linkedin-btn">
                    <i class="fa-solid fa-plus" style="margin-right: 6px;"></i>
                    Add Experience
                </button>
                {% endif %}
            </div>


            <div class="connections sidebar-left">
                <p><span>Connections</span><br>Grow your network</p>
            </div>
            <div class="premium sidebar-left">
                <p>Get hired 2.6x faster with Premium</p>
                <span>Try for ‚Çπ0</span>
            </div>
            <div class="sidebar-left">
                <div class="sidebar-icons">
                    <i class="fa-solid fa-bookmark"></i>
                    <p>Saved items</p>
                </div>
                <div class="sidebar-icons">
                    <i class="fa-solid fa-people-group"></i>
                    <p>Groups</p>
                </div>
                <div class="sidebar-icons">
                    <i class="fa-regular fa-newspaper"></i>
                    <p>Newsletters</p>
                </div>
                <div class="sidebar-icons">
                    <i class="fa-solid fa-calendar"></i>
                    <p>Events</p>
                </div>
            </div>
        </aside>

        <!-- Experience Modal -->

        <div id="experienceModal" class="modal" style="display:none;">
            <div class="modal-content">
                <div class="experience-modal-scroll">
                    <span class="close">&times;</span>
                    <h2>Add Experience</h2>
                    <form id="experienceForm" method="POST" enctype="multipart/form-data"
                        action="{% url 'add_experience' %}">
                        {% csrf_token %}
                        {{ experience_form.as_p }}
                        <button type="submit">Save</button>
                    </form>
                </div>
            </div>

        </div>




        <!-- Feed Section -->
        <section class="feed">
            <div class="post-box">
                <button class="start-a-post">Start a post</button>
                <div class="post-actions">
                    <button><i class="fa-solid fa-image"></i> Photo</button>
                    <button><i class="fa-solid fa-video"></i> Video</button>
                    <button><i class="fa-solid fa-newspaper"></i> Write article</button>
                </div>
            </div>

            <!-- Modal -->
            <div id="postModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>Create a Post</h2>
                    <form method="POST" action="{% url 'home' %}">
                        {% csrf_token %}
                        <textarea name="content" placeholder="What do you want to talk about?" required></textarea>
                        <button type="submit">Post</button>
                    </form>
                </div>
            </div>

            <!-- Photo Modal -->
            <div id="photoModal" class="modal" style="display:none;">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>Post a Photo</h2>
                    <form method="POST" action="{% url 'home' %}" enctype="multipart/form-data">
                        {% csrf_token %}
                        <textarea name="content" placeholder="Say something about this photo..." rows="3"
                            required></textarea>
                        <input type="file" name="image" accept="image/*" required>
                        <input type="url" name="url" class="url" placeholder="Reference URL (optional)">
                        <div class="modal-actions">
                            <button type="submit">Post</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Video Modal -->
            <div id="videoModal" class="modal" style="display:none;">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>Post a Video</h2>
                    <form method="POST" action="{% url 'home' %}" enctype="multipart/form-data">
                        {% csrf_token %}
                        <textarea name="content" placeholder="Say something about this video..." rows="3"
                            required></textarea>
                        <input type="file" name="video" accept="video/*" required>
                        <input type="url" name="url" class="url" placeholder="Reference URL (optional)">
                        <div class="modal-actions">
                            <button type="submit">Post</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Article Modal -->
            <div id="articleModal" class="modal" style="display:none;">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>Write an Article</h2>
                    <form method="POST" action="{% url 'home' %}">
                        {% csrf_token %}
                        <input type="text" name="title" placeholder="Article title" required>
                        <textarea name="content" placeholder="Write your article..." rows="6" required></textarea>
                        <input type="file" name="media" accept="image/*,video/*">
                        <input type="url" name="url" class="url" placeholder="Reference URL (optional)">
                        <div class="modal-actions">
                            <button type="submit">Post</button>
                        </div>
                    </form>
                </div>
            </div>



            {% for post in posts %}
            <div class="post">
                <h4>{{ post.user.username }}</h4>

                {% if post.title %}
                <h3>{{ post.title }}</h3>
                {% endif %}

                <p>{{ post.content }}</p>

                {% if post.url %}
                <p>
                    <a href="{{ post.url }}" target="_blank" rel="noopener noreferrer">
                        {{ post.url }}
                    </a>
                </p>
                {% endif %}

                {% if post.image %}
                <img src="{{ post.image.url }}" width="200">
                {% endif %}

                {% if post.video %}
                <video width="300" controls>
                    <source src="{{ post.video.url }}">
                </video>
                {% endif %}
                <div class="post-btns">
                    <button><i class="fa-regular fa-thumbs-up"></i> Like</button>
                    <button><i class="fa-regular fa-comment-dots"></i> Comment</button>
                    <button><i class="fa-solid fa-paper-plane"></i> Send</button>
                </div>
            </div>
            {% endfor %}

        </section>

        <!-- Right Sidebar -->
        <aside class="sidebar-right">
            <div class="widget">
                <h4>LinkedIn News</h4>
                <ul>
                    <li>üöÄ AI is booming in 2025</li>
                    <li>üíº Tech jobs in demand</li>
                    <li>üåç Remote work trends</li>
                </ul>
            </div>
        </aside>
    </main>
    <script src="{% static 'js/modal.js' %}"></script>
</body>

</html>